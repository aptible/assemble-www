- resource = current_page.data
- content_for :header do
  %header.aptible-header.aptible-header--with-breadcrumbs.hero-gradient--angled
    = partial 'partials/main-nav', locals: {      |
        section_title: 'Resources',               |
        section_url: '/resources/'                |
      }                                           |

= wrap_layout :layout do
  .content.resource__header
    .grid-container.grid-container--no-padding.resource__header-wrap
      %h1.heading__title= resource.title
      .heading__summary= resource.excerpt

  .content
    .grid-container.grid-container--no-padding
      .grid-document.markdown-content.resource-article
        = find_and_preserve do
          = yield

        - if resource.type == 'webinar'
          %h3#transcript Transcript
          - if resource.webinar_transcript_partial
            = partial(resource.webinar_transcript_partial)
          - else
            %em Coming Soon

        - if resource.type == 'webinar'
          - if (prev_webinars = previous_webinars(resource)).count > 0
            %h3 Previous Webinars
            %ul
              - prev_webinars.each do |r|
                %li
                  %a{ href: resource_path(r) }
                    %strong= post_date(r.date)



- if resource.attachments
  .resource-docs
    - resource.attachments.each do |doc|
      %a.resource-doc{ href: doc.url, title: doc.title, data: { type: doc.type }, target: '_blank' }
        = partial '/images/aptible-small-mark.svg'

      .grid-aside
        = partial 'resources-aside'
